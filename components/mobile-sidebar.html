<!-- YPP Website - 3단 계층 Mobile Sidebar Component -->

<!-- 오버레이 -->
<div id="sidebar-overlay" class="sidebar-overlay"></div>

<!-- 모바일 사이드바 -->
<div id="mobile-sidebar" class="mobile-sidebar" aria-hidden="true">
    <!-- 사이드바 헤더 -->
    <div class="sidebar-header">    
        <img src="../assets/images/logo/slogan03.png" alt="YPP 로고" class="sidebar-logo">
        <button id="sidebar-close" class="sidebar-close" aria-label="메뉴 닫기">✕</button>
    </div>

    <!-- 사이드바 네비게이션 -->
    <nav class="sidebar-nav">
        <ul class="sidebar-menu">
            <!-- 회사소개 -->
            <li class="sidebar-item has-submenu">
                <a class="sidebar-link" data-toggle="submenu">
                    <span>회사소개</span>
                    <span class="sidebar-arrow">›</span>
                </a>
                <ul class="sidebar-submenu">
                    <li class="sidebar-subitem has-submenu">
                        <a class="sidebar-sublink" data-toggle="submenu">
                            <span>기업개요</span>
                            <span class="sidebar-arrow">›</span>
                        </a>
                        <ul class="sidebar-sub-submenu">
                            <li><a href="../pages/company/about.html">회사개요</a></li>
                            <li><a href="../pages/company/vision.html">비전</a></li>
                            <li><a href="../pages/company/mission.html">미션</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/company/history.html" class="sidebar-sublink">
                            <span>연혁</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/company/organization.html" class="sidebar-sublink">
                            <span>조직도</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/company/location.html" class="sidebar-sublink">
                            <span>오시는 길</span>
                        </a>
                    </li>
                </ul>
            </li>

            <!-- 사업분야 -->
            <li class="sidebar-item has-submenu">
                <a class="sidebar-link" data-toggle="submenu">
                    <span>사업분야</span>
                    <span class="sidebar-arrow">›</span>
                </a>
                <ul class="sidebar-submenu">
                    <li class="sidebar-subitem has-submenu">
                        <a class="sidebar-sublink" data-toggle="submenu">
                            <span>시스템공급</span>
                            <span class="sidebar-arrow">›</span>
                        </a>
                        <ul class="sidebar-sub-submenu">
                            <li><a href="../pages/business/system/power.html">전력시스템</a></li>
                            <li><a href="../pages/business/system/automation.html">자동화시스템</a></li>
                            <li><a href="../pages/business/system/control.html">제어시스템</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/business/solution.html" class="sidebar-sublink">
                            <span>솔루션개발</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/business/engineering.html" class="sidebar-sublink">
                            <span>엔지니어링</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/business/esg.html" class="sidebar-sublink">
                            <span>ESG경영</span>
                        </a>
                    </li>
                </ul>
            </li>

            <!-- 제품소개 -->
            <li class="sidebar-item has-submenu">
                <a class="sidebar-link" data-toggle="submenu">
                    <span>제품소개</span>
                    <span class="sidebar-arrow">›</span>
                </a>
                <ul class="sidebar-submenu">
                    <li class="sidebar-subitem has-submenu">
                        <a class="sidebar-sublink" data-toggle="submenu">
                            <span>디지털 보호계전기</span>
                            <span class="sidebar-arrow">›</span>
                        </a>
                        <ul class="sidebar-sub-submenu">
                            <li><a href="../pages/products/digital-relay/overcurrent.html">과전류계전기</a></li>
                            <li><a href="../pages/products/digital-relay/distance.html">거리계전기</a></li>
                            <li><a href="../pages/products/digital-relay/differential.html">차동계전기</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/products/triump.html" class="sidebar-sublink">
                            <span>삼중화 보호 TRIUMP</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/products/fault-recorder.html" class="sidebar-sublink">
                            <span>고장기록장치</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/products/" class="sidebar-sublink">
                            <span>전체 제품 보기</span>
                        </a>
                    </li>
                </ul>
            </li>

            <!-- 교육센터 -->
            <li class="sidebar-item has-submenu">
                <a class="sidebar-link" data-toggle="submenu">
                    <span>교육센터</span>
                    <span class="sidebar-arrow">›</span>
                </a>
                <ul class="sidebar-submenu">
                    <li class="sidebar-subitem">
                        <a href="../pages/education/relay-school.html" class="sidebar-sublink">
                            <span>Relay School</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/education/psac.html" class="sidebar-sublink">
                            <span>PSAC</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/education/schedule.html" class="sidebar-sublink">
                            <span>교육일정</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a onclick="openAcademyPopup(); closeMobileSidebar();" class="sidebar-sublink">
                            <span>교육신청</span>
                        </a>
                    </li>
                </ul>
            </li>

            <!-- 고객지원 -->
            <li class="sidebar-item has-submenu">
                <a class="sidebar-link" data-toggle="submenu">
                    <span>고객지원</span>
                    <span class="sidebar-arrow">›</span>
                </a>
                <ul class="sidebar-submenu">
                    <li class="sidebar-subitem">
                        <a href="../pages/support/contact.html" class="sidebar-sublink">
                            <span>문의하기</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/support/faq.html" class="sidebar-sublink">
                            <span>FAQ</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/support/download.html" class="sidebar-sublink">
                            <span>자료실</span>
                        </a>
                    </li>
                    <li class="sidebar-subitem">
                        <a href="../pages/support/manual.html" class="sidebar-sublink">
                            <span>매뉴얼</span>
                        </a>
                    </li>
                </ul>
            </li>

            <!-- 직접 링크들 -->
            <li class="sidebar-item">
                <a href="../pages/company/location.html" class="sidebar-link">
                    <span>오시는 길</span>
                </a>
            </li>

            <li class="sidebar-item">
                <a href="../pages/support/contact.html" class="sidebar-link">
                    <span>문의하기</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- 사이드바 푸터 -->
    <div class="sidebar-footer">
        <!-- 그룹웨어 링크 -->
        <a href="http://gwa.ypp.co.kr/gw/uat/uia/egovLoginUsr.do" class="sidebar-groupware" target="_blank">
            GROUPWARE
        </a>

        <!-- 언어 선택 -->
        <div class="sidebar-lang">
            <button class="sidebar-lang-btn active" data-lang="ko">한국어</button>
            <button class="sidebar-lang-btn" data-lang="en">English</button>
        </div>
    </div>
</div>

<style>
/* ===== 3단 계층 MOBILE SIDEBAR ===== */
.mobile-sidebar {
    position: fixed;
    top: 0;
    right: -100%;
    width: 320px;
    height: 100vh;
    background-color: var(--white);
    z-index: 2000;
    transition: right 0.3s ease;
    box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
    overflow-y: auto;
}

.mobile-sidebar.active {
    right: 0;
}

.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1500;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.sidebar-overlay.active {
    opacity: 1;
    visibility: visible;
}

.sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
}

.sidebar-logo {
    height: 40px;
}

.sidebar-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--text-primary);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 50%;
    transition: all 0.3s ease;
}

.sidebar-close:hover {
    color: var(--primary-red);
}

.sidebar-nav {
    padding: 0;
}

.sidebar-menu {
    list-style: none;
    margin: 0;
    padding: 0;
}

/* ===== 1단계 메뉴 ===== */
.sidebar-item {
    border-bottom: 1px solid var(--border-color);
}

.sidebar-link {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.5rem;
    color: var(--text-primary);
    font-weight: 600;
    font-size: 1rem;
    transition: all 0.3s ease;
    text-decoration: none;
    cursor: pointer;
}

.sidebar-link:hover {
    background-color: var(--very-light-gray);
    color: var(--primary-blue);
}

.sidebar-arrow {
    font-size: 1.2rem;
    color: var(--text-secondary);
    transition: transform 0.3s ease;
    transform: rotate(90deg); /* 기본: 아래 방향 */
}

.sidebar-item.active > .sidebar-link .sidebar-arrow,
.sidebar-subitem.active > .sidebar-sublink .sidebar-arrow {
    transform: rotate(270deg); /* 열림: 위 방향 */
}

/* ===== 2단계 서브메뉴 ===== */
.sidebar-submenu {
    list-style: none;
    margin: 0;
    padding: 0;
    background-color: var(--very-light-gray);
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: all 0.3s ease;
    border-left: 3px solid var(--primary-blue);
}

.sidebar-submenu.active {
    max-height: 500px;
    opacity: 1;
}

.sidebar-subitem {
    border-bottom: 1px solid rgba(255, 255, 255, 0.5);
}

.sidebar-subitem:last-child {
    border-bottom: none;
}

.sidebar-sublink {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 2.5rem;
    color: var(--text-secondary);
    font-size: 0.9rem;
    font-weight: 500;
    transition: all 0.3s ease;
    text-decoration: none;
    cursor: pointer;
}

.sidebar-sublink:hover {
    background-color: rgba(0, 102, 204, 0.1);
    color: var(--primary-blue);
}

.sidebar-subitem.active > .sidebar-sublink .sidebar-arrow {
    transform: rotate(180deg);
}

/* ===== 3단계 서브서브메뉴 ===== */
.sidebar-sub-submenu {
    list-style: none;
    margin: 0;
    padding: 0;
    background-color: var(--white);
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: all 0.3s ease;
}

.sidebar-sub-submenu.active {
    max-height: 300px;
    opacity: 1;
}

.sidebar-sub-submenu li {
    border-bottom: 1px solid var(--border-color);
}

.sidebar-sub-submenu li:last-child {
    border-bottom: none;
}

.sidebar-sub-submenu a {
    display: block;
    padding: 0.6rem 3.5rem;
    color: var(--text-secondary);
    font-size: 0.85rem;
    transition: all 0.3s ease;
    text-decoration: none;
    position: relative;
}


.sidebar-sub-submenu a:hover {
    background-color: var(--very-light-gray);
    color: var(--primary-blue);
}

/* ===== 사이드바 푸터 ===== */
.sidebar-footer {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 1.5rem;
    border-top: 1px solid var(--border-color);
    background-color: var(--very-light-gray);
}

.sidebar-groupware {
    display: block;
    width: 100%;
    padding: 0.75rem;
    background-color: var(--dark-gray);
    color: var(--white);
    text-align: center;
    border-radius: 5px;
    margin-bottom: 1rem;
    transition: all 0.3s ease;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 600;
}

.sidebar-groupware:hover {
    background-color: var(--primary-blue);
}

.sidebar-lang {
    display: flex;
    gap: 0.5rem;
}

.sidebar-lang-btn {
    flex: 1;
    padding: 0.5rem;
    border: 1px solid var(--border-color);
    background-color: var(--white);
    color: var(--text-secondary);
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.85rem;
}

.sidebar-lang-btn.active {
    background-color: var(--primary-blue);
    color: var(--white);
    border-color: var(--primary-blue);
}

/* 모바일에서만 표시 */
@media (min-width: 769px) {
    .mobile-sidebar,
    .sidebar-overlay {
        display: none !important;
    }
}
</style>