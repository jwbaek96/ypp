<!DOCTYPE html>
<html lang="ko">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
<!-- SEO 메타 태그 -->
    <title>YPP - 안전하고 지속가능한 에너지의 미래를 여는 기업</title>
    <meta name="description" content="YPP는 디지털 보호계전기, 삼중화 보호 TRIUMP, 고장기록장치 전문 제조기업입니다. 전력계통 보호 솔루션을 제공합니다.">
    <meta name="keywords" content="보호계전기, 디지털보호계전기, TRIUMP, 고장기록장치, 전력계통보호, YPP">
    
<!-- Open Graph -->
    <meta property="og:title" content="YPP - 안전하고 지속가능한 에너지의 미래를 여는 기업">
    <meta property="og:description" content="안전하고 지속가능한 에너지의 미래를 여는 전력계통 보호 솔루션 전문기업 YPP">
    <meta property="og:type" content="website">
    
<!-- 파비콘 -->
    <link rel="icon" type="image/ico" href="./assets/images/favicon/favicon.ico">
    
<!-- Critical CSS 우선 로딩 -->
    <link rel="stylesheet" href="./css/style.css">
    
<!-- 섹션별 CSS -->
    <link rel="stylesheet" href="./css/index/index.css">

<!-- 헤더 메타테그 추가 -->
    <script src="./js/head-meta.js"></script>

<!-- 리뉴얼 작업 시 잠금 화면 활성화 스크립트 -->
     <!-- <script src="./redirect.js"></script>-->
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <img src="./assets/images/logo/slogan01.png" alt="YPP 로고" class="loading-logo">
    </div>

    <!-- Header Container -->
    <div id="header-container"></div>
    
    <!-- Mobile Sidebar Container -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- 브레드크럼 (필요시) -->
        <!-- <div id="breadcrumb-container"></div> -->
        
        <!-- 섹션 컨테이너들 -->
        <div id="hero-section-container"></div>
        <div id="intro-section-container"></div>
        <div id="epc-business-container"></div>
        <div id="protection-products-container"></div>
        <div id="company-overview-container"></div>
        <div id="academy-container"></div>
        <!-- <div id="keypartners-container"></div> -->
        <div id="contact-container"></div>
        
    </main>

    <!-- Footer Container -->
    <div id="footer-container"></div>
    <!-- Popup Container -->
    <div id="popup-container"></div>
    <!-- Top Button Container -->
    <div id="scrolltotop-container"></div>
    <!-- 스크롤 탑 버튼 -->

    <!-- 첫 로딩화면 구현하기 -->
    <script src="./js/loading-screen.js"></script>
    <!-- 공통 컴포넌트 불러오기(헤더,푸터,사이드바/최상단가기 버튼) -->
    <script src="./js/components.js"></script>
    <!-- 헤더 메뉴 불러오기 -->
    <script src="./js/header-menu.js"></script>
    <!-- 햄버거 메뉴버튼 기능 -->
    <script src="./js/hamburger.js"></script>
    <!-- 사이드바 생성하기 -->
    <script src="./js/sidebar.js"></script>
    <!-- 히어로 섹션에 헤더 높이만큼 패딩 top주기 -->
    <script src="./js/main-top-padding.js"></script>
    <!-- 인덱스 페이지의 섹션들 html 불러오기 -->
    <script src="./js/index-sections.js"></script>
    <!-- 최상단 가기 버튼 구현하기 -->
    <script src="./js/scrolltotop.js"></script>
    <!-- 한영 전환 기능 -->
    <script src="./js/lang-switch.js"></script>
    <!-- 팝업창(리뉴얼 안내, 회사소개서 다운로드, 교육안내 및 자료, 신청서 다운로드) -->
    <script src="/popup/popup-modal.js"></script>
    <link rel="stylesheet" href="/popup/popup-style.css">

    <!-- 최초 접속 시 한국어 자동 선택 -->
<script>
    // 최초 접속 시 한국어 자동 선택
    (function() {
        const savedLanguage = localStorage.getItem('selectedLanguage');
        
        if (!savedLanguage) {
            console.log('최초 접속 - 한국어 자동 설정');
            
            // 한국어 버튼을 찾아서 클릭 (여러 번 시도)
            function tryClickKorean() {
                const koreanButton = document.querySelector('.lang-btn[data-lang="ko"]');
                if (koreanButton) {
                    koreanButton.click();
                    console.log('한국어 버튼 자동 클릭 완료');
                    return true;
                }
                return false;
            }
            
            // 즉시 시도
            if (!tryClickKorean()) {
                // 0.5초 후 시도
                setTimeout(() => {
                    if (!tryClickKorean()) {
                        // 1초 후 시도
                        setTimeout(() => {
                            if (!tryClickKorean()) {
                                // 버튼이 없으면 직접 설정
                                localStorage.setItem('selectedLanguage', 'ko');
                                console.log('버튼을 찾을 수 없어 직접 한국어 설정');
                            }
                        }, 500);
                    }
                }, 500);
            }
        }
    })();

</script>
<script>
    // 히어로 섹션 비디오 한영 전환 기능
function switchHeroVideo(lang) {
    // 메인 페이지에서만 실행
    if (!window.location.pathname.includes('index.html') && window.location.pathname !== '/') {
        return;
    }
    
    const videoElement = document.querySelector('#hero-section video, .hero-section video, .hero-video');
    
    if (!videoElement) {
        console.log('히어로 비디오를 찾을 수 없습니다.');
        return;
    }
    
    console.log('히어로 비디오 찾음:', videoElement);
    
    // 비디오 소스 매핑 (실제 파일 경로로 수정하세요)
    const videoSources = {
        en: '/assets/videos/hero-video-2-eng.mp4',  // 한국어 비디오 경로
        ko: '/assets/videos/hero-bg.mp4'  // 영어 비디오 경로
    };
    
    const newVideoSrc = videoSources[lang];
    
    if (!newVideoSrc) {
        console.log('해당 언어의 비디오 소스가 없습니다:', lang);
        return;
    }
    
    // 현재 재생 시간과 상태 저장
    const currentTime = videoElement.currentTime;
    const wasPlaying = !videoElement.paused;
    
    try {
        // 비디오 소스 변경
        videoElement.src = newVideoSrc;
        
        // 비디오 로드 후 이전 위치와 상태 복원
        videoElement.addEventListener('loadeddata', function restoreVideo() {
            videoElement.currentTime = currentTime;
            
            if (wasPlaying) {
                videoElement.play().catch(error => {
                    console.log('비디오 자동 재생 실패:', error);
                });
            }
            
            // 이벤트 리스너 제거 (한 번만 실행)
            videoElement.removeEventListener('loadeddata', restoreVideo);
        });
        
        // 비디오 로드
        videoElement.load();
        
        console.log('비디오 소스 변경 성공:', newVideoSrc);
        
    } catch (error) {
        console.error('비디오 변경 실패:', error);
        
        // 비디오 변경이 실패하면 페이지 리로드
        console.log('비디오 변경 실패 - 페이지 리로드 실행');
        setTimeout(() => {
            window.location.reload();
        }, 500);
    }
}

// 페이지 리로드 방식 (대안)
function reloadPageForVideoSwitch(lang) {
    // 메인 페이지에서만 실행
    if (!window.location.pathname.includes('index.html') && window.location.pathname !== '/') {
        return;
    }
    
    console.log('언어 전환으로 인한 페이지 리로드');
    
    // 언어 설정 후 페이지 리로드
    setTimeout(() => {
        window.location.reload();
    }, 300); // 언어 전환 애니메이션 후 리로드
}

// 메인 언어 전환 기능에 통합
// lang-switch.js의 switchLanguage 함수에 추가하거나
// 별도로 언어 전환 이벤트를 감지

// 방법 1: MutationObserver로 언어 전환 감지
function observeLanguageChange() {
    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                const target = mutation.target;
                if (target.classList.contains('lang-btn') && target.classList.contains('active')) {
                    const selectedLang = target.dataset.lang;
                    console.log('언어 전환 감지:', selectedLang);
                    
                    // 비디오 교체 시도
                    switchHeroVideo(selectedLang);
                    
                    // 또는 페이지 리로드 (주석 해제해서 사용)
                    // reloadPageForVideoSwitch(selectedLang);
                }
            }
        });
    });
    
    // 언어 버튼들을 관찰
    document.querySelectorAll('.lang-btn').forEach(button => {
        observer.observe(button, { attributes: true });
    });
}

// 페이지 로드 후 관찰 시작
document.addEventListener('DOMContentLoaded', () => {
    setTimeout(observeLanguageChange, 1000);
});

// 방법 2: 직접 언어 전환 함수에 추가 (더 간단)
// lang-switch.js의 switchLanguage 함수 마지막에 추가:
// switchHeroVideo(selectedLang);
</script>

</body>
</html>
<!-- 인덱스 스타일 -->
<style>
    .index-section-header{text-align: left;}
    .index-section-title{font-size: 2.5rem;font-weight: 700;margin-bottom: 2.5rem;text-transform: uppercase;}
    .index-section-description{font-size: 0.95rem;font-weight: normal;line-height: 1.5;margin: 1rem 0;text-transform:initial;}
    .index-section-subtitle{font-size: 1.5rem;font-weight: 600;padding: .2rem 1rem;border-left: 7px solid #007bff;vertical-align: middle;margin-bottom: 1.5rem;}

    #keypartners .container,
    #contact .container,
    #academy .container,
    .epc-business-areas .container {max-width: 1200px;margin: 0 auto;padding: 0 1rem;}
</style>