// 교육과정 체크박스 생성
function generateEducationCheckboxes(pageType, item) {
    const currentEducation = item.detailedEducation || '';
    
    // 더 안전한 구분자 처리 - 쉼표+공백 또는 세미콜론으로 구분
    let selectedCourses = [];
    if (currentEducation) {
        // 먼저 세미콜론으로 구분 시도 (더 안전한 구분자)
        if (currentEducation.includes(';')) {
            selectedCourses = currentEducation.split(';').map(course => course.trim()).filter(course => course);
        } else {
            // 쉼표로 구분하되, 연속된 쉼표+공백 패턴을 찾아서 구분
            // 예: "과정1, 과정2" (구분자) vs "HVDC, MVDC" (과정명 내부)
            const parts = currentEducation.split(/,\s*(?=\d+주:)/); // 숫자+주: 패턴 앞의 쉼표+공백으로 구분
            if (parts.length > 1) {
                selectedCourses = parts.map(course => course.trim()).filter(course => course);
            } else {
                // 단일 과정인 경우
                selectedCourses = [currentEducation.trim()];
            }
        }
    }
    
    if (pageType === 'PSAC') {
        const psacCourses = [
            '1주: 전력계통 해석의 기본 이론',
            '2주: 전력계통(설비) 보호기술',
            '3주: 동기발전기 기술',
            '4주: 무효전력 운영과 전압제어',
            '5주: 전력설비의 동특성(계통안정도)',
            '6주: 분산에너지 시스템 기술',
            '7주: 보호릴레이 정정법과 보호협조기술',
            '8주: HVDC, MVDC, LVDC 및 FACTS기술',
            '9주: 에너지 전환기의 전력계통 계획과 운영/에너지 시장과 신사업 모델',
            '10주: 신재생에너지 계통연계 기술'
        ];
        
        return psacCourses.map((course, index) => {
            const isChecked = selectedCourses.includes(course);
            const checkedAttr = isChecked ? 'checked="checked"' : '';
            return `
                <div class="education-checkbox-item">
                    <input type="checkbox" id="psac_week_${index + 1}" name="detailedEducation" value="${course}" ${checkedAttr}>
                    <label for="psac_week_${index + 1}">${course}</label>
                </div>
            `;
        }).join('');
        
    } else if (pageType === 'RelaySchool') {
        const relayCourses = [
            // 현재 진행 중인 과정들
            '디지털릴레이 기본반 (2025년 9월 17일(수) ~ 9월 19일(금))',
            '디지털릴레이 고급반 (2025년 10월 22일(수) ~ 10월 24일(금))',
            '고장분석반 (2025년 11월 19일(수) ~ 11월 21일(금))',
            // 마감된 과정들
            '디지털릴레이 기본반 (2025년 3월 19일(수) ~ 3월 21일(금))',
            '디지털릴레이 고급반 (2025년 4월 16일(수) ~ 4월 18일(금))',
            '고장분석반 (2025년 5월 21일(수) ~ 5월 23일(금))',
            'ECMS운영반 (2025년 6월 18일(수) ~ 6월 20일(금))',
            '원자력 특성화반 (2025년 7월 16일(수) ~ 7월 20일(일))'
        ];
        
        return relayCourses.map((course, index) => {
            const isChecked = selectedCourses.includes(course);
            const checkedAttr = isChecked ? 'checked="checked"' : '';
            return `
                <div class="education-checkbox-item">
                    <input type="checkbox" id="relay_course_${index + 1}" name="detailedEducation" value="${course}" ${checkedAttr}>
                    <label for="relay_course_${index + 1}">${course}</label>
                </div>
            `;
        }).join('');
    }
    
    return `<textarea name="detailedEducation" required>${currentEducation}</textarea>`;
}
